import type { StorySnippet, StoryFull } from '@/types'

/**
 * Fairytale class
 */
export class Fairytale {
  docId: string
  name: string
  content: string

  constructor(docId: string, name: string, content: string) {
    this.docId = docId
    this.name = name
    this.content = content
  }
}

export function query(keyword: string): StorySnippet[] {
  var beforeAfterChars = 100
  var results: StorySnippet[] = []

  searchIndex.fairytales.forEach((fairytale) => {
    var content = fairytale.content
    var foundPos = content.toLowerCase().indexOf(keyword.toLowerCase())

    if (foundPos > -1) {
      const storySubstring = content.substring(
        Math.max(0, foundPos - beforeAfterChars),
        Math.min(content.length, foundPos + beforeAfterChars)
      )

      results.push({
        docId: fairytale.docId,
        name: fairytale.name,
        snippet: `${storySubstring}...`,
      } as StorySnippet
      )
    }
  })

  return results
}

// TODO: change into logic for :docId on this same GET route
export function getFairytale(docId: string): StoryFull {
  var results = searchIndex.fairytales.filter(fairytale => fairytale.docId === docId)
  if (results.length > 0)
    return results[0]
  else
    return {} as StoryFull
}

// Create an array of Fairytale instances for the index
export const searchIndex = {
  fairytales: [
    new Fairytale(
      "hansel-gretel",
      "HÃ¤nsel and Gretel",
      "Hard by a great forest dwelt a poor wood-cutter with his wife and his two children.  The boy was called Hansel and the girl Gretel.  He had little to bite and to break, and once when great dearth fell on the land, he could no longer procure even daily bread.  Now when he thought over this by night in his bed, and tossed about in his anxiety, he groaned and said to his wife, what is to become of us.  How are we to feed our poor children, when we no longer have anything even for ourselves.  I'll tell you what, husband, answered the woman, early to-morrow morning we will take the children out into the forest to where it is the thickest.  There we will light a fire for them, and give each of them one more piece of bread, and then we will go to our work and leave them alone.  They will not find the way home again, and we shall be rid of them.  No, wife, said the man, I will not do that. How can I bear to leave my children alone in the forest.   The wild animals would soon come and tear them to pieces.  O' you fool, said she, then we must all four die of hunger, you may as well plane the planks for our coffins, and she left him no peace until he consented.  But I feel very sorry for the poor children, all the same, said the man. The two children had also not been able to sleep for hunger, and had heard what their step-mother had said to their father.  Gretel wept bitter tears, and said to Hansel, now all is over with us. Be quiet, Gretel, said Hansel, do not distress yourself, I will soon find a way to help us.  And when the old folks had fallen asleep, he got up, put on his little coat, opened the door below, and crept outside.  The moon shone brightly, and the white pebbles which lay in front of the house glittered like real silver pennies.  Hansel stooped and stuffed the little pocket of his coat with as many as he could get in.  Then he went back and said to Gretel, be comforted, dear little sister, and sleep in peace, God will not forsake us, and he lay down again in his bed.  When day dawned, but before the sun had risen, the woman came and awoke the two children, saying get up, you sluggards.  We are going into the forest to fetch wood.  She gave each a little piece of bread, and said, there is something for your dinner, but do not eat it up before then, for you will get nothing else.  Gretel took the bread under her apron, as Hansel had the pebbles in his pocket.  Then they all set out together on the way to the forest.  When they had walked a short time, Hansel stood still and peeped back at the house, and did so again and again.  His father said, Hansel, what are you looking at there and staying behind for.  Pay attention, and do not forget how to use your legs.  Ah, father, said Hansel, I am looking at my little white cat, which is sitting  up on the roof, and wants to say good-bye to me.  The wife said, fool, that is not your little cat, that is the morning sun which is shining on the chimneys.  Hansel, however, had not been looking back at the cat, but had been constantly throwing one of the white pebble-stones out of his pocket on the road. When they had reached the middle of the forest, the father said, now, children, pile up some wood, and I will light a fire that you may not be cold.  Hansel and Gretel gathered brushwood together, as high as a little hill.  The brushwood was lighted, and when the flames were burning very high, the woman said, now, children, lay yourselves down by the fire and rest, we will go into the forest and cut some wood.  When we have done, we will come back and fetch you away. Hansel and Gretel sat by the fire, and when noon came, each ate a little piece of bread, and as they heard the strokes of the wood-axe they believed that their father was near.  It was not the axe, however, but a branch which he had fastened to a withered tree which the wind was blowing backwards and forwards.  And as they had been sitting such a long time, their eyes closed with fatigue, and they fell fast asleep.  When at last they awoke, it was already dark night.  Gretel began to cry and said, how are we to get out of the forest now.  But Hansel comforted her and said, just wait a little, until the moon has risen, and then we will soon find the way.  And when the full moon had risen, Hansel took his little sister by the hand, and followed the pebbles which shone like newly-coined silver pieces, and showed them the way.",
    ),
    new Fairytale(
      "twelve-brothers",
      "Twelve Brothers",
      "There were once upon a time a king and a queen who lived happily together and had twelve children, but they were all boys.  Then said the king to his wife, if the thirteenth child which you are about to bring into the world, is a girl, the twelve boys shall die, in order that her possessions may be great, and that the kingdom may fall to her alone.  He even caused twelve coffins to be made, which were already filled with shavings, and in each lay a little death pillow, and he had them taken into a locked-up room, and then he gave the queen the key of it, and bade her not to speak of this to anyone. The mother, however, now sat and lamented all day long, until the youngest son, who was always with her, and whom she had named benjamin, from the bible, said to her, dear mother, why are you so sad. Dearest child, she answered, I may not tell you.  But he let her have no rest until she went and unlocked the room, and showed him the twelve coffins ready filled with shavings.  Then she said, my dearest benjamin, your father has had these coffins made for you and for your eleven brothers, for if I bring a little girl into the world, you are all to be killed and buried in them.  And as she wept while she was saying this, the son comforted her and said, weep not, dear mother, we will save ourselves, and go hence.  But she said, go forth into the forest with your eleven brothers, and let one sit constantly on the highest tree which can be found, and keep watch, looking towards the tower here in the castle.  If I give birth to a little son, I will put up a white flag, and then you may venture to come back.  But if I bear a daughter, I will hoist a red flag, and then fly hence as quickly as you are able, and may the good God protect you.  And every night I will rise up and pray for you - in winter that you may be able to warm yourself at a fire, and in summer that you may not faint away in the heat. After she had blessed her sons therefore, they went forth into the forest.  They each kept watch in turn, and sat on the highest oak and looked towards the tower.  When eleven days had passed and the turn came to benjamin, he saw that a flag was being raised. It was, however, not the white, but the blood-red flag which announced that they were all to die.  When the brothers heard that, they were very angry and said, are we all to suffer death for the sake of a girl.  We swear that we will avenge ourselves - wheresoever we find a girl, her red blood shall flow. Thereupon they went deeper into the forest, and in the midst of it, where it was the darkest, they found a little bewitched hut, which was standing empty.  Then said they, here we will dwell, and you benjamin, who are the youngest and weakest, you shall stay at home and keep house, we others will go out and fetch food. Then they went into the forest and shot hares, wild deer, birds and pigeons, and whatsoever there was to eat.  This they took to benjamin, who had to dress it for them in order that they might appease their hunger.  They lived together ten years in the little hut, and the time did not appear long to them. The little daughter which their mother the queen had given birth to, was now grown up.  She was good of heart, and fair of face, and had a golden star on her forehead.  Once, on a great washing, she saw twelve men's shirts among the things, and asked her mother, to whom do these twelve shirts belong, for they are far too small for father.  Then the queen answered with a heavy heart, dear child, these belong to your twelve brothers.  Said the maiden, where are my twelve brothers, I have never yet heard of them.  She replied, God knows where they are, they are wandering about the world.  Then she took the maiden and opened the chamber for her, and showed her the twelve coffins with the shavings, and the death pillows.  These coffins, said she, were destined for your brothers, who went away secretly before you were born, and she related to her how everything had happened. Then said the maiden, dear mother, weep not, I will go and seek my brothers. So she took the twelve shirts and went forth, and straight into the great forest.  She walked the whole day, and in the evening she came to the bewitched hut.  Then she entered it and found a young boy, who asked, from whence do you come, and whither are you bound, and was astonished that she was so beautiful, and wore royal garments, and had a star on her forehead.  And she answered, I am a king's daughter, and am seeking my twelve brothers, and I will walk as far as the sky is blue until I find them.  And she showed him the twelve shirts which belonged to them.  Then benjamin saw that she was his sister, and said, I am benjamin, your youngest brother.  And she began to weep for joy, and benjamin wept also, and they kissed and embraced each other with the greatest love.  But after this he said, dear sister, there is still one difficulty.  We have agreed that every maiden whom we meet shall die, because we have been obliged to leave our kingdom on account of a girl.  Then said she, I will willingly die, if by so doing I can save my twelve brothers. No, answered he, you shall not die.  Seat yourself beneath this tub until our eleven brothers come, and then I will soon come to an agreement with them. She did so, and when it was night the others came from hunting, and their dinner was ready.  And as they were sitting at table, and eating, they asked, what news is there.  Said benjamin, don't you know anything.  No, they answered.  He continued, you have been in the forest and I have stayed at home, and yet I know more than you do.  Tell us then, they cried.  He answered, but promise me that the first maiden who meets us shall not be killed. Yes, they all cried, she shall have mercy, only do tell us. Then said he, our sister is here, and he lifted up the tub, and the king's daughter came forth in her royal garments with the golden star on her forehead, and she was beautiful, delicate and fair.  Then they were all rejoiced, and fell on her neck, and kissed and loved her with all their hearts. Now she stayed at home with benjamin and helped him with the work.  The eleven went into the forest and caught game, and deer, and birds, and wood-pigeons that they might have food, and the little sister and benjamin took care to make it ready for them. She sought for the wood for cooking and herbs for vegetables, and put the pans on the fire so that the dinner was always ready when the eleven came.  She likewise kept order in the little house, and put beautifully white clean coverings on the little beds and the brothers were always contented and lived in great harmony with her. Once upon a time the two at home had prepared a wonderful feast, and when they were all together, they sat down and ate and drank and were full of gladness.  There was, however, a little garden belonging to the bewitched house wherein stood twelve lily flowers, which are likewise called student-lilies.  She wished to give her brothers pleasure, and plucked the twelve flowers, and thought she would present each brother with one while at dinner. But at the self-same moment that she plucked the flowers the twelve brothers were changed into twelve ravens, and flew away over the forest, and the house and garden vanished likewise.  And now the poor maiden was alone in the wild forest, and when she looked around, an old woman was standing near her who said, my child, what have you done.  Why did you not leave the twelve white flowers growing.  They were your brothers, who are now forevermore changed into ravens.  The maiden said, weeping, is there no way of saving them. No, said the woman, there is but one in the whole world, and that is so hard that you will not save them by it, for you must be dumb for seven years, and may not speak or laugh, and if you speak one single word, and only an hour of the seven years is wanting, all is in vain, and your brothers will be killed by the one word. Then said the maiden in her heart, I know with certainty that I shall set my brothers free, and went and sought a high tree and seated herself in it and spun, and neither spoke nor laughed.  Now it so happened that a king was hunting in the forest, who had a great greyhound which ran to the tree on which the maiden was sitting, and sprang about it, whining, and barking at her.  Then the king came by and saw the beautiful king's daughter with the golden star on her brow, and was so charmed with her beauty that he called to ask her if she would be his wife.  She made no answer, but nodded a little with her head.  So he climbed up the tree himself, carried her down, placed her on his horse, and bore her home.  Then the wedding was solemnized with great magnificence and rejoicing, but the bride neither spoke nor smiled.  When they had lived happily together for a few years, the king's mother, who was a wicked woman, began to slander the young queen, and said to the king, this is a common beggar girl whom you have brought back with you.  Who knows what wicked tricks she practises secretly. Even if she be dumb, and not able to speak, she still might laugh for once.  But those who do not laugh have bad consciences. At first the king would not believe it, but the old woman urged this so long, and accused her of so many evil things, that at last the king let himself be persuaded and sentenced her to death. And now a great fire was lighted in the courtyard in which she was to be burnt, and the king stood above at the window and looked on with tearful eyes, because he still loved her so much. And when she was bound fast to the stake, and the fire was licking at her clothes with its red tongue, the last instant of the seven years expired.  Then a whirring sound was heard in the air, and twelve ravens came flying towards the place, and sank downwards, and when they touched the earth they were her twelve brothers, whom she had saved.  They tore the fire asunder, extinguished the flames, set their dear sister free, and kissed and embraced her.  And now as she dared to open her mouth and speak, she told the king why she had been dumb, and had never laughed.  The king rejoiced when he heard that she was innocent, and they all lived in great unity until their death.  The wicked step-mother was taken before the judge, and put into a barrel filled with boiling oil and venomous snakes, and died an evil death.",
    ),
    new Fairytale(
      "two-brothers",
      "Two Brothers",
      "There were once upon a time two brothers, one rich and the othe poor.  The rich one was a goldsmith and evil-hearted. The poor on supported himself by making brooms, and was good and honorable.  H had two children, who were twin brothers and as like each other a two drops of water.  The two boys went in and out of the rich house and often got some of the scraps to eat.  It happened once when th poor man was going into the forest to fetch brush-wood, that he saw  bird which was quite golden and more beautiful than any he had eve chanced to meet with.  He picked up a small stone, threw it at it and was lucky enough to hit it, but one golden feather only fel down, and the bird flew away.  The man took the feather and carrie it to his brother, who looked at it and said, it is pure gold. An gave him a great deal of money for it.  Next day the man climbed int a birch-tree, and was about to cut off a couple of branches when th same bird flew out, and when the man searched he found a nest, and a egg lay inside it, which was of gold.  He took the egg home with him and carried it to his brother, who again said, it is pure gold, an gave him what it was worth.  At last the goldsmith said, I shoul indeed like to have the bird itself.  The poor man went into th forest for the third time, and again saw the golden bird sitting o the tree, so he took a stone and brought it down and carried it t his brother, who gave him a great heap of gold for it.  Now I can ge on, thought he, and went contentedly home The goldsmith was crafty and cunning, and knew very well what kind o a bird it was.  He called his wife and said, roast me the gold bird and take care that none of it is lost.  I have a fancy to eat it al myself.  The bird, however, was no common one, but of so wondrous  kind that whosoever ate its heart and liver found every morning  piece of gold beneath his pillow.  The woman prepared the bird, pu it on the spit, and let it roast.  Now it happened that while it wa on the fire, and the woman was forced to go out of the kitchen o account of some other work, the two children of the poor broom-make ran in, stood by the spit and turned it round once or twice.  And a at that very moment two little bits of the bird fell down into th pan, one of the boys said, we will eat these two little bits.  I a so hungry, and no one will ever miss them.  Then the two ate th pieces, but the woman came into the kitchen and saw that they wer eating something and said, what have you been eating.  Two littl morsels which fell out of the bird, answered they.  That must hav been the heart and the liver, said the woman, quite frightened, an in order that her husband might not miss them and be angry, sh quickly killed a young cock, took out his heart and liver, and pu them beside the golden bird.  When it was ready, she carried it t the goldsmith, who consumed it all alone, and left none of it.  Nex morning, however, when he felt beneath his pillow, and expected t bring out the piece of gold, no more gold pieces were there tha there had always been The two children did not know what a piece of good-fortune had falle to their lot.  Next morning when they arose, something fell rattlin to the ground, and when they picked it up there were two gold pieces They took them to their father, who was astonished and said, how ca that have happened.  When next morning they again found two, and s on daily, he went to his brother and told him the strange story.  Th goldsmith at once knew how it had happened, and that the children ha eaten the heart and liver of the golden bird, and in order to reveng himself, and because he was envious and hard-hearted, he said to th father, your children are in league with the evil one, do not tak the gold, and do not suffer them to stay any longer in your house for he has them in his power, and may ruin you likewise.  The fathe feared the evil one, and painful as it was to him, he nevertheles led the twins forth into the forest, and with a sad heart left the there And now the two children ran about the forest, and sought the wa home again, but could not find it, and only lost themselves more an more.  At length they met with a huntsman, who asked, to whom do yo children belong.  We are the poor broom-maker's boys, they replied and they told him that their father would not keep them any longer i the house because a piece of gold lay every morning under thei pillows.  Come, said the huntsman, that is nothing so very bad, if a the same time you remain honest, and are not idle.  As the good ma liked the children, and had none of his own, he took them home wit him and said, I will be your father, and bring you up till you ar big.  They learnt huntsmanship from him, and the piece of gold whic each of them found when he awoke, was kept for them by him in cas they should need it in the future When they were grown up, their foster-father one day took them int the forest with him, and said, to-day shall you make your trial shot so that I may release you from your apprenticeship, and make yo huntsmen.  They went with him to lie in wait and stayed there a lon time, but no game appeared.  The huntsman, however, looked above hi and saw a covey of wild geese flying in the form of a triangle, an said to one of them,  shoot me down one from each corner.  He did it and thus accomplished his trial shot Soon after another covey came flying by in the form of the figur two, and the huntsman bade the other also bring down one from eac corner, and his trial shot was likewise successful.  Now, said th foster-father, I pronounce you out of your apprenticeship.  You ar skilled huntsmen.  Thereupon the two brothers went forth togethe into the forest, and took counsel with each other and planne something.  And in the evening when they had sat down to supper, the said to their foster-father, we will not touch food, or take on mouthful, until you have granted us a request.  Said he, what, then is your request.  They replied, we have now finished learning, and w must prove ourselves in the world, so allow us to go away and travel Then spoke the old man joyfully, you talk like brave huntsmen, tha which you desire has been my wish.  Go forth, all will go well wit you.  Thereupon they ate and drank joyously together When the appointed day came, their foster-father presented each o them with a good gun and a dog, and let each of them take as many o his saved-up gold pieces as he chose.  Then he accompanied them  part of the way, and when taking leave, he gave them a bright knife and said, if ever you separate, stick this knife into a tree at th place where you part, and when one of you returns, he will will b able to see how his absent brother is faring, for the side of th knife which is turned in the direction by which he went, will rust i he dies, but will remain bright as long as he is alive.  The tw brothers went still farther onwards, and came to a forest which wa so large that it was impossible for them to get out of it in one day So they passed the night in it, and ate what they had put in thei hunting-pouches, but they walked all the second day likewise, an still did not get out.  As they had nothing to eat, one of them said we must shoot something for ourselves or we shall suffer from hunger and loaded his gun, and looked about him.  And when an old hare cam running up towards them, he laid his gun on his shoulder, but th hare cried      dear huntsman, do but let me live      two little ones to thee I'll give and sprang instantly into the thicket, and brought two young ones But the little creatures played so merrily, and were so pretty, tha the huntsmen could not find it in their hearts to kill them.  The therefore kept them with them, and the little hares followed on foot Soon after this, a fox crept past.  They were just going to shoot it but the fox cried      dear hunstman, do but let me live      two little ones to thee I'll give He, too, brought two little foxes, and the huntsmen did not like t kill them either, but gave them to the hares for company, and the followed behind.  It was not long before a wolf strode out of th thicket.  The huntsmen made ready to shoot him, but the wolf cried      dear huntsman, do but let me live      two little ones to thee I'll give The huntsman put the two wolves beside the other animals, and the followed behind them.  Then a bear came who wanted to trot about  little longer, and cried      dear huntsman, do but let me live      two little ones to thee I'll give The two young bears were added to the others, and there were alread eight of them.  Then who should come.  A lion came, and tossed hi mane.  But the huntsmen did not let themselves be frightened an aimed at him likewise, but the lion also said      dear huntsman, do but let me live      two little ones to thee I'll give And he brought his little ones to them, and now the huntsmen had tw lions, two bears, two wolves, two foxes, and two hares, who followed them and served them.  In the meantime their hunger was not appeased by this, and they said to the foxes, listen you sneakers, provide us with something to eat.  You are crafty and cunning.  They replied, not far from here lies a village, from which we have already brought many a fowl.  We will show you the way there.  So they went into the village, bought themselves something to eat, had some food given to their beasts, and then traveled onwards.  The foxes knew their way very well about the district and where the poultry-yards were, and were were able to guide the huntsmen."
    ),
    new Fairytale(
      "old-sultan",
      "Old Sultan",
      "A farmer once had a faithful dog called sultan, who had grown old, and lost all his teeth, so that he could no longer hold on to anything.  One day the farmer was standing with his wife before the house-door, and said, to-morrow I intend to shoot old sultan, he is no longer of any use. His wife, who felt pity for the faithful beast, answered, he has served us so long, and been so faithful, that we might well give him his keep. What, said the man, you are not very bright.  He has not a tooth left in his head, and not a thief is afraid of him, now he can go.  If he has served us, he has had good feeding for it. The poor dog, who was lying stretched out in the sun not far off, had heard everything, and was sorry that the morrow was to be his last day.  He had a good friend, the wolf, and he crept out in the evening into the forest to him, and complained of the fate that awaited him.  Listen, gossip, said the wolf, be of good cheer, I will help you out of your trouble.  I have thought of something.  To-morrow, early in the morning, your master is going with his wife to make hay, and they will take their little child with them, for no one will be left behind in the house. They are wont, during work-time, to lay the child under the hedge in the shade, you lay yourself there too, just as if you wished to guard it.  Then I will come out of the wood, and carry off the child.  You must rush swiftly after me, as if you would seize it again from me.  I will let it fall, and you will take it back to its parents, who will think that you have saved it, and will be far too grateful to do you any harm, on the contrary, you will be in high favor, and they will never let you want for anything again. The plan pleased the dog, and it was carried out just as it was arranged.  The father screamed when he saw the wolf running across the field with his child, but when old sultan brought it back, then he was full of joy, and stroked him and said, not a hair of yours shall be hurt, you shall eat my bread free as long as you live.  And to his wife he said, go home at once and make old sultan some bread-sop that he will not have to bite, and bring the pillow out of my bed, I will give him that to lie upon. Henceforth old sultan was as well off as he could wish to be. Soon afterwards the wolf visited him, and was pleased that everything had succeeded so well.  But, gossip, said he, you will just wink an eye if, when I have a chance, I carry off one of your master's fat sheep.  Do not reckon upon that, answered the dog, I will remain true to my master, I cannot agree to that.  The wolf, who thought that this could not be spoken in earnest, came creeping about in the night and was going to take away the sheep. But the farmer, to whom the faithful sultan had told the wolf's plan, caught him and dressed his hide soundly with the flail. The wolf had to make himself scarce, but he cried out to the dog, wait a bit, you scoundrel, you shall pay for this. The next morning the wolf sent the boar to challenge the dog to come out into the forest so that they might settle the affair. Old sultan could find no one to stand by him but a cat with only three legs, and as they went out together the poor cat limped along, and at the same time stretched out her tail into the air with pain. The wolf and his friend were already at the appointed place, but when they saw their enemy coming they thought that he was bringing a sabre with him, for they mistook the outstretched tail of the cat for one.  And when the poor beast hopped on its three legs, they could only think every time that it was picking up a stone to throw at them.  So they were both afraid, the wild boar crept into the under-wood and the wolf jumped up a tree. The dog and the cat, when they came up, wondered that there was no one to be seen.  The wild boar, however, had not been able to hide himself altogether, one of his ears was sticking out.  Whilst the cat was looking carefully about, the boar moved his ear, the cat, who thought it was a mouse moving there, jumped upon it and bit it hard.  The boar made a fearful noise and ran away, crying out, the guilty one is up in the tree.  The dog and cat looked up and saw the wolf, who was ashamed of having shown himself so timid, and made friends with the dog."),
    new Fairytale(
      "cinderella",
      "Cinderella",
      "Cinderella The wife of a rich man fell sick, and as she felt that her end was drawing near, she called her only daughter to her bedside and said, dear child, be good and pious, and then the good God will always protect you, and I will look down on you from heaven and be near you.  Thereupon she closed her eyes and departed.  Every day the maiden went out to her mother's grave, and wept, and she remained pious and good.  When winter came the snow spread a white sheet over the grave, and by the time the spring sun had drawn it off again, the man had taken another wife. The woman had brought with her into the house two daughters, who were beautiful and fair of face, but vile and black of heart. Now began a bad time for the poor step-child.  Is the stupid goose to sit in the parlor with us, they said.  He who wants to eat bread must earn it.  Out with the kitchen-wench.  They took her pretty clothes away from her, put an old grey bedgown on her, and gave her wooden shoes.  Just look at the proud princess, how decked out she is, they cried, and laughed, and led her into the kitchen. There she had to do hard work from morning till night, get up before daybreak, carry water, light fires, cook and wash.  Besides this, the sisters did her every imaginable injury - they mocked her and emptied her peas and lentils into the ashes, so that she was forced to sit and pick them out again.  In the evening when she had worked till she was weary she had no bed to go to, but had to sleep by the hearth in the cinders.  And as on that account she always looked dusty and dirty, they called her cinderella. It happened that the father was once going to the fair, and he asked his two step-daughters what he should bring back for them. Beautiful dresses, said one, pearls and jewels, said the second. And you, cinderella, said he, what will you have.  Father break off for me the first branch which knocks against your hat on your way home.  So he bought beautiful dresses, pearls and jewels for his two step-daughters, and on his way home, as he was riding through a green thicket, a hazel twig brushed against him and knocked off his hat.  Then he broke off the branch and took it with him.  When he reached home he gave his step-daughters the things which they had wished for, and to cinderella he gave the branch from the hazel-bush.  Cinderella thanked him, went to her mother's grave and planted the branch on it, and wept so much that the tears fell down on it and watered it.  And it grew and became a handsome tree. Thrice a day cinderella went and sat beneath it, and wept and prayed, and a little white bird always came on the tree, and if cinderella expressed a wish, the bird threw down to her what she had wished for. It happened, however, that the king gave orders for a festival which was to last three days, and to which all the beautiful young girls in the country were invited, in order that his son might choose himself a bride.  When the two step-sisters heard that they too were to appear among the number, they were delighted, called cinderella and said, comb our hair for us, brush our shoes and fasten our buckles, for we are going to the wedding at the king's palace. Cinderella obeyed, but wept, because she too would have liked to go with them to the dance, and begged her step-mother to allow her to do so.  You go, cinderella, said she, covered in dust and dirt as you are, and would go to the festival.  You have no clothes and shoes, and yet would dance.  As, however, cinderella went on asking, the step-mother said at last, I have emptied a dish of lentils into the ashes for you, if you have picked them out again in two hours, you shall go with us.  The maiden went through the back-door into the garden, and called, you tame pigeons, you turtle-doves, and all you birds beneath the sky, come and help me to pick      the good into the pot,      the bad into the crop. Then two white pigeons came in by the kitchen window, and afterwards the turtle-doves, and at last all the birds beneath the sky, came whirring and crowding in, and alighted amongst the ashes. And the pigeons nodded with their heads and began pick, pick, pick, pick, and the rest began also pick, pick, pick, pick, and gathered all the good grains into the dish.  Hardly had one hour passed before they had finished, and all flew out again.  Then the girl took the dish to her step-mother, and was glad, and believed that now she would be allowed to go with them to the festival. But the step-mother said, no, cinderella, you have no clothes and you can not dance.  You would only be laughed at.  And as cinderella wept at this, the step-mother said, if you can pick two dishes of lentils out of the ashes for me in one hour, you shall go with us.  And she thought to herself, that she most certainly cannot do again.  When the step-mother had emptied the two dishes of lentils amongst the ashes, the maiden went through the back-door into the garden and cried, you tame pigeons, you turtle-doves, and all you birds beneath the sky, come and help me to pick      the good into the pot,      the bad into the crop. Then two white pigeons came in by the kitchen-window, and afterwards the turtle-doves, and at length all the birds beneath the sky, came whirring and crowding in, and alighted amongst the ashes.  And the doves nodded with their heads and began pick, pick, pick, pick, and the others began also pick, pick, pick, pick, and gathered all the good seeds into the dishes, and before half an hour was over they had already finished, and all flew out again. Then the maiden was delighted, and believed that she might now go with them to the wedding.  But the step-mother said, all this will not help.  You cannot go with us, for you have no clothes and can not dance.  We should be ashamed of you.  On this she turned her back on cinderella, and hurried away with her two proud daughters. As no one was now at home, cinderella went to her mother's grave beneath the hazel-tree, and cried -      shiver and quiver, little tree,      silver and gold throw down over me. Then the bird threw a gold and silver dress down to her, and slippers embroidered with silk and silver.  She put on the dress with all speed, and went to the wedding.  Her step-sisters and the step-mother however did not know her, and thought she must be a foreign princess, for she looked so beautiful in the golden dress. They never once thought of cinderella, and believed that she was sitting at home in the dirt, picking lentils out of the ashes.  The prince approached her, took her by the hand and danced with her. He would dance with no other maiden, and never let loose of her hand, and if any one else came to invite her, he said, this is my partner. She danced till it was evening, and then she wanted to go home. But the king's son said, I will go with you and bear you company, for he wished to see to whom the beautiful maiden belonged. She escaped from him, however, and sprang into the pigeon-house.  The king's son waited until her father came, and then he told him that the unknown maiden had leapt into the pigeon-house.  The old man thought, can it be cinderella.  And they had to bring him an axe and a pickaxe that he might hew the pigeon-house to pieces, but no one was inside it.  And when they got home cinderella lay in her dirty clothes among the ashes, and a dim little oil-lamp was burning on the mantle-piece, for cinderella had jumped quickly down from the back of the pigeon-house and had run to the little hazel-tree, and there she had taken off her beautiful clothes and laid them on the grave, and the bird had taken them away again, and then she had seated herself in the kitchen amongst the ashes in her grey gown. Next day when the festival began afresh, and her parents and the step-sisters had gone once more, cinderella went to the hazel-tree and said -      shiver and quiver, my little tree,      silver and gold throw down over me. Then the bird threw down a much more beautiful dress than on the preceding day. And when cinderella appeared at the wedding in this dress, every one was astonished at her beauty.  The king's son had waited until she came, and instantly took her by the hand and danced with no one but her.  When others came and invited her, he said, this is my partner.  When evening came she wished to leave, and the king's son followed her and wanted to see into which house she went.  But she sprang away from him, and into the garden behind the house.  Therein stood a beautiful tall tree on which hung the most magnificent pears.  She clambered so nimbly between the branches like a squirrel that the king's son did not know where she was gone.  He waited until her father came, and said to him, the unknown maiden has escaped from me, and I believe she has climbed up the pear-tree.  The father thought, can it be cinderella.  And had an axe brought and cut the tree down, but no one was on it.  And when they got into the kitchen, cinderella lay there among the ashes, as usual, for she had jumped down on the other side of the tree, had taken the beautiful dress to the bird on the little hazel-tree, and put on her grey gown. On the third day, when the parents and sisters had gone away, cinderella went once more to her mother's grave and said to the little tree -      shiver and quiver, my little tree,      silver and gold throw down over me. And now the bird threw down to her a dress which was more splendid and magnificent than any she had yet had, and the slippers were golden.  And when she went to the festival in the dress, no one knew how to speak for astonishment.  The king's son danced with her only, and if any one invited her to dance, he said this is my partner. When evening came, cinderella wished to leave, and the king's son was anxious to go with her, but she escaped from him so quickly that he could not follow her.  The king's son, however, had employed a ruse, and had caused the whole staircase to be smeared with pitch, and there, when she ran down, had the maiden's left slipper remained stuck.  The king's son picked it up, and it was small and dainty, and all golden.  Next morning, he went with it to the father, and said to him, no one shall be my wife but she whose foot this golden slipper fits.  Then were the two sisters glad, for they had pretty feet.  The eldest went with the shoe into her room and wanted to try it on, and her mother stood by.  But she could not get her big toe into it, and the shoe was too small for her.  Then her mother gave her a knife and said, cut the toe off, when you are queen you will have no more need to go on foot.  The maiden cut the toe off, forced the foot into the shoe, swallowed the pain, and went out to the king's son.  Then he took her on his his horse as his bride and rode away with her.  They were obliged, however, to pass the grave, and there, on the hazel-tree, sat the two pigeons and cried -      turn and peep, turn and peep,      there's blood within the shoe,      the shoe it is too small for her,      the true bride waits for you. Then he looked at her foot and saw how the blood was trickling from it.  He turned his horse round and took the false bride home again, and said she was not the true one, and that the other sister was to put the shoe on.  Then this one went into her chamber and got her toes safely into the shoe, but her heel was too large.  So her mother gave her a knife and said,  cut a bit off your heel, when you are queen you will have no more need to go on foot.  The maiden cut a bit off her heel, forced her foot into the shoe, swallowed the pain, and went out to the king's son.  He took her on his horse as his bride, and rode away with her, but when they passed by the hazel-tree, the two pigeons sat on it and cried -      turn and peep, turn and peep,      there's blood within the shoe,      the shoe it is too small for her,      the true bride waits for you. He looked down at her foot and saw how the blood was running out of her shoe, and how it had stained her white stocking quite red.  Then he turned his horse and took the false bride home again.  This also is not the right one, said he, have you no other daughter.  No, said the man, there is still a little stunted kitchen-wench which my late wife left behind her, but she cannot possibly be the bride.  The king's son said he was to send her up to him, but the mother answered, oh, no, she is much too dirty, she cannot show herself.  But he absolutely insisted on it, and cinderella had to be called.  She first washed her hands and face clean, and then went and bowed down before the king's son, who gave her the golden shoe.  Then she seated herself on a stool, drew her foot out of the heavy wooden shoe, and put it into the slipper, which fitted like a glove.  And when she rose up and the king's son looked at her face he recognized the beautiful maiden who had danced with him and cried, that is the true bride.  The step-mother and the two sisters were horrified and became pale with rage, he, however, took cinderella on his horse and rode away with her.  As they passed by the hazel-tree, the two white doves cried -      turn and peep, turn and peep,      no blood is in the shoe,      the shoe is not too small for her,      the true bride rides with you, and when they had cried that, the two came flying down and placed themselves on cinderella's shoulders, one on the right, the other on the left, and remained sitting there. When the wedding with the king's son was to be celebrated, the two false sisters came and wanted to get into favor with cinderella and share her good fortune.  When the betrothed couple went to church, the elder was at the right side and the younger at the left, and the pigeons pecked out one eye from each of them.  Afterwards as they came back the elder was at the left, and the younger at the right, and then the pigeons pecked out the other eye from each.  And thus, for their wickedness and falsehood, they were punished with blindness all their days."
    )
  ],
}
